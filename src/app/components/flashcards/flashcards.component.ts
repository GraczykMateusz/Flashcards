import {Component, OnInit} from '@angular/core';
import {FlashcardsService} from '../../services/flashcards/flashcards.service';
import {BehaviorSubject, map, take} from 'rxjs';
import {Flashcard} from '../../services/flashcards/model/flashcard';
import {AuthService} from '../../services/auth/auth.service';
import {Router} from '@angular/router';
import {MatSnackBar} from '@angular/material/snack-bar';
import {FlashcardsRandomizerService} from '../../services/flashcards/flashcards-randomizer/flashcards-randomizer.service';
import {DomSanitizer, SafeHtml} from "@angular/platform-browser";

@Component({
  selector: 'app-flashcards',
  templateUrl: './flashcards.component.html',
  styleUrls: ['./flashcards.component.scss']
})
export class FlashcardsComponent implements OnInit {

  sadDog = '<img src="data:image/jpeg;base64,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" alt="flashcard-image"/>'
  flashcards: Flashcard[] = [];
  index = 0;
  nextFlashcardIndex = 0;
  isRotated = false;
  loading = true;
  notify = new BehaviorSubject<any>("");

  constructor(private flashcardsService: FlashcardsService,
              private flashcardsRandomizer: FlashcardsRandomizerService,
              private auth: AuthService,
              private snackBar: MatSnackBar,
              private router: Router,
              private sanitizer: DomSanitizer) {
  }

  ngOnInit(): void {
    this.flashcardsRandomizer.isRandomIndex = false;
    this.auth.getUser()
      .pipe(take(1), map(user => user?.email))
      .subscribe(email => {
        if (email) {
          this.auth.email = email;
          this.flashcardsService.getFlashcards()
            .pipe(take(1))
            .subscribe(flashcards => {
              this.flashcards = flashcards;
              this.flashcardsRandomizer.randomIndexes = Array.from(Array(this.flashcards.length).keys())
              this.loading = false;
              this.updateInfo();
            });
        } else {
          this.router.navigateByUrl('/login').then();
        }
      })
  }

  flipCard(): void {
    this.isRotated = !this.isRotated;
  }

  async nextFlashcard(): Promise<void> {
    this.isRotated = false;
    await new Promise(f => setTimeout(f, 100));

    if (this.flashcards.length - 1 === this.nextFlashcardIndex) {
      this.nextFlashcardIndex = 0;
    } else {
      this.nextFlashcardIndex++;
    }

    if (this.flashcardsRandomizer.isRandomIndex) {
      this.index = this.flashcardsRandomizer.randomIndexes[this.nextFlashcardIndex];
    } else {
      this.index = this.nextFlashcardIndex;
    }
    this.updateInfo();
  }

  updateInfo(): void {
    this.notify.next({
      flashcard: this.flashcards[this.index],
      index: this.index,
      length: this.flashcards.length
    })
  }

  transformExample(value: string | undefined): SafeHtml | string {
    if (value?.includes('<br/>')) {
      return this.sanitizer.bypassSecurityTrustHtml(value || '');
    } else {
      return value || '';
    }
  }
}
